{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nexport let EditDrinkComponent = class EditDrinkComponent {\n  constructor(route, drinkService, router, datePipe) {\n    this.route = route;\n    this.drinkService = drinkService;\n    this.router = router;\n    this.datePipe = datePipe;\n    this.updateDrinkRequest = {\n      id: 0,\n      name: '',\n      description: '',\n      dateCreated: new Date(),\n      formattedDateCreated: '',\n      isActive: true,\n      image: '',\n      imageNew: ''\n    };\n  }\n  ngOnInit() {\n    // To grab id of the current drink record\n    this.route.paramMap.subscribe({\n      next: params => {\n        const id = params.get('id');\n        if (id) {\n          //call api\n          this.drinkService.getDrink(id).subscribe({\n            next: response => {\n              this.updateDrinkRequest = response;\n              this.updateDrinkRequest.formattedDateCreated = this.datePipe.transform(response.dateCreated, 'MMMM d, y h:mm a');\n              this.updateDrinkRequest.image = 'data:image/png;base64,' + response.image;\n            }\n          });\n        }\n      }\n    });\n  }\n  updateDrink() {\n    this.drinkService.updateDrink(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest).subscribe({\n      next: response => {\n        this.router.navigate(['drinks']);\n      }\n    });\n  }\n  updateDrinkPhoto() {\n    this.drinkService.updateDrinkPhoto(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest.image).subscribe({\n      next: response => {\n        this.router.navigate(['drinks']);\n      }\n    });\n  }\n  deleteDrink() {\n    // Delete the drink, close the modal and redirect to the drink list page.\n    this.drinkService.deleteDrink(this.updateDrinkRequest.id.toString()).subscribe({\n      next: response => {\n        document.getElementById(\"closeBtn\")?.click();\n        this.router.navigate(['drinks']);\n      }\n    });\n  }\n  confirmImageUpdate() {\n    if (confirm(\"Are you sure to update the image?\")) {\n      if (this.updateDrinkRequest.imageNew) {\n        this.drinkService.updateDrinkPhoto(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest.imageNew).subscribe({\n          next: response => {\n            this.router.navigate(['drinks']);\n          }\n        });\n      } else {\n        alert(\"Please select an image.\");\n      }\n    }\n  }\n};\nEditDrinkComponent = __decorate([Component({\n  selector: 'app-edit-drink',\n  templateUrl: './edit-drink.component.html',\n  styleUrls: ['./edit-drink.component.css'],\n  providers: [DatePipe]\n})], EditDrinkComponent);","map":{"version":3,"names":["Component","DatePipe","EditDrinkComponent","constructor","route","drinkService","router","datePipe","updateDrinkRequest","id","name","description","dateCreated","Date","formattedDateCreated","isActive","image","imageNew","ngOnInit","paramMap","subscribe","next","params","get","getDrink","response","transform","updateDrink","toString","navigate","updateDrinkPhoto","deleteDrink","document","getElementById","click","confirmImageUpdate","confirm","alert","__decorate","selector","templateUrl","styleUrls","providers"],"sources":["C:\\Users\\Jei Yang\\source\\repos\\HomeCafe\\angularapp\\src\\app\\components\\drinks\\edit-drink\\edit-drink.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DrinkService } from '../../../services/drink.service';\nimport { Drink } from '../../../models/drink.model';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n  selector: 'app-edit-drink',\n  templateUrl: './edit-drink.component.html',\n  styleUrls: ['./edit-drink.component.css'],\n  providers: [DatePipe]\n})\nexport class EditDrinkComponent implements OnInit {\n\n  updateDrinkRequest: Drink = {\n    id: 0,\n    name: '',\n    description: '',\n    dateCreated: new Date(),\n    formattedDateCreated: '',\n    isActive: true,\n    image: '',\n    imageNew: ''\n  };\n\n  constructor(private route: ActivatedRoute, private drinkService: DrinkService, private router: Router, private datePipe: DatePipe) { }\n\n  ngOnInit(): void {\n    // To grab id of the current drink record\n    this.route.paramMap.subscribe({\n      next: (params) => {\n        const id = params.get('id');\n\n        if (id) {\n          //call api\n          this.drinkService.getDrink(id)\n            .subscribe({\n              next: (response) => {\n                this.updateDrinkRequest = response;\n                this.updateDrinkRequest.formattedDateCreated = this.datePipe.transform(response.dateCreated, 'MMMM d, y h:mm a');\n                this.updateDrinkRequest.image = 'data:image/png;base64,' + response.image;\n              }\n            });\n        }\n\n      }\n    });\n  }\n\n  updateDrink() {\n    this.drinkService.updateDrink(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest)\n      .subscribe({\n        next: (response) => {\n          this.router.navigate(['drinks']);\n        }\n      });\n  }\n\n  updateDrinkPhoto() {\n    this.drinkService.updateDrinkPhoto(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest.image)\n      .subscribe({\n        next: (response) => {\n          this.router.navigate(['drinks']);\n        }\n      });\n  }\n\n  deleteDrink() {\n    // Delete the drink, close the modal and redirect to the drink list page.\n    this.drinkService.deleteDrink(this.updateDrinkRequest.id.toString())\n      .subscribe({\n        next: (response) => {\n          document.getElementById(\"closeBtn\")?.click();\n          this.router.navigate(['drinks']);\n        }\n      });\n  }\n\n  confirmImageUpdate() {\n    if (confirm(\"Are you sure to update the image?\")) {\n      if (this.updateDrinkRequest.imageNew) {\n        this.drinkService.updateDrinkPhoto(this.updateDrinkRequest.id.toString(), this.updateDrinkRequest.imageNew)\n        .subscribe({\n          next: (response) => {\n            this.router.navigate(['drinks']);\n          }\n        });\n      } else {\n        alert(\"Please select an image.\")\n      }\n\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}